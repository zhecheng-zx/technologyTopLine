<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/main.css"/>
		<script src="../../js/autoSize.js"></script>
		<style type="text/css">
			.mui-content{
				background: #f4f4f4;
			}
			.mui-content>.mui-table-view:first-child{
				margin: 10px auto;
			}
			.login-box .mui-table-view-cell{
				padding: 15px;
			}
			.login-box .mui-table-view-cell>a:not(.mui-btn){
				margin: -15px;
			}
			.mui-table-view .img-box{
				width: 54px;
				height: 54px;
				border-radius: 50%;
				background: #f8f8f8;
			    margin-right: 17px;
   				margin-left: 25px;
			}
			.login-box .noLoginBox{
				line-height: 50px;
				font-size: 16px;
				color: #323232;
			}
			.mui-card{
				margin: 10px auto;
			}
			
			.mui-card .mui-table-view-cell{
				padding: 15px;
			}
			.mui-card .mui-table-view-cell>a:not(.mui-btn){
				margin: -15px;
			}
			.myCenter .mui-icon-chat{
				font-size: 19px;
			}
			
			.userNameBox{
				padding: 4px;
			}
			
			.userNameBox .userName{
				font-size: 16px;
				color: #333;
				margin-bottom: 8px;
			}
			
			.userNameBox .info{
				color: #999;
			}
		</style>
	</head>
	<body>
		<div class="mui-content myCenter">
			<ul class="mui-table-view login-box">
				<li class="mui-table-view-cell mui-media">
					<a href="javascript:;">
						<div class="img-box mui-pull-left">
							<img class="userImg">
						</div>
						<div class="mui-media-body noLoginBox" style="display: none;">
							登录科技头条 体验更多功能
						</div>
						<div class="mui-media-body userNameBox">
							<h4 class="userName">卖火柴的小女孩</h4>
							<h6 class="info">这家伙很懒，什么都么留下</h6>
						</div>
					</a>
				</li>
			</ul>
			<div class="mui-card">
		        <ul class="mui-table-view">		        
		            <li class="mui-table-view-cell">
		                <a class="mui-navigate-right" href="javascript:;" data-guid="message.guide">
		                    <span class="mui-badge mui-badge-danger">15</span>
		                    <span class="mui-icon mui-icon-chat icon-blue"></span>
		                    	消息通知
		                </a>
		            </li>
		            <li class="mui-table-view-cell">
		                <a class="mui-navigate-right" data-guid="history.guide">	
		                	<span class="mui-icon mui-icon-star icon-dark-yellow"></span>
		                    	历史与收藏
		                </a>
		            </li>
		        </ul>
		    </div>
		    <div class="mui-card tech-pomp">
		        <ul class="mui-table-view">		        
		            <li class="mui-table-view-cell">
		                <a class="mui-navigate-right">
		                    <span class="mui-badge mui-badge-danger">15</span>
		                    <span class="mui-icon mui-icon-chat icon-blue"></span>
		                    	科技内参
		                </a>
		            </li>
		        </ul>
		    </div>
		    <div class="mui-card">
		        <ul class="mui-table-view">		        
		            <li class="mui-table-view-cell">
		                <a class="mui-navigate-right">		
		                	<span class="mui-icon mui-icon-compose icon-green"></span>
		                    	用户反馈
		                </a>
		            </li>
		            <li class="mui-table-view-cell">
		                <a class="mui-navigate-right">	
		                	<span class="mui-icon mui-icon-gear icon-light-yellow"></span>
		                    	系统设置
		                </a>
		            </li>
		        </ul>
		    </div>
		</div>
		<script src="../../vendor/jQuery/jquery.min.js"></script>
		<script src="../../js/mui.min.js"></script>
		<script>		
			$(function(){
				//判断用户是否登录 显示
				$('.tech-pomp').hide();
			});
			
			//消息通知、历史与收藏
			var message_detail = null, history_detail = null;
			var titleNView = { //详情页原生导航配置
				backgroundColor: '#f7f7f7', //导航栏背景色
				titleText: '', //导航栏标题
				titleColor: '#333', //文字颜色
				type: 'transparent', //透明渐变样式
				autoBackButton: true, //自动绘制返回箭头
				splitLine: { //底部分割线
					color: '#cccccc'
				}
			}
			
			mui.plusReady(function() {
				//预加载详情页
				message_detail = mui.preload({
					url: 'message.html',
					id: 'message'
				});
				history_detail = mui.preload({
					url: 'history.html',
					id: 'history'
				});
			});
			
			//点击列表，打开详情
			mui('.mui-content').on('tap', '[data-guid]', function() {
				var guid = this.getAttribute('data-guid');				
				open_detail(guid);
			});;

			
			/**
			 * 打开子页面
			 * 
			 * @param {String} guid 
			 */
			function open_detail(guid) {
				var showPage = '';
				
				//触发子窗口变更新闻详情
				if(guid.indexOf('message') >= 0){
					showPage = message_detail;
					//更改详情页原生导航条信息
					titleNView.titleText = '消息通知';										
				}else if(guid.indexOf('history') >= 0){
					showPage = history_detail;
					titleNView.titleText = '历史与收藏';					
				}
				
				
				mui.fire(showPage, 'get_detail', {
					guid: guid
				});
				showPage.setStyle({
					"titleNView": titleNView
				});
				setTimeout(function(){
					showPage.show('slide-in-right', 300);
				});
			}
		</script>
	</body>
</html>
